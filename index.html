<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Premium QR Code Generator</title>

<style>
:root{
  --primary:#4f46e5;
  --bg:#0f172a;
  --card:#020617;
  --text:#e5e7eb;
}
*{box-sizing:border-box;font-family:'Segoe UI',sans-serif}

body{
  margin:0;
  background:linear-gradient(135deg,#020617,#020617);
  color:var(--text);
  padding:20px;
}

.container{
  max-width:900px;
  margin:auto;
}

.header{
  display:flex;
  align-items:center;
  gap:15px;
  margin-bottom:20px;
}

.header img{
  width:60px;
  height:60px;
  border-radius:50%;
  object-fit:cover;
  border:2px solid var(--primary);
}

.header input{
  background:none;
  border:none;
  color:white;
  font-size:22px;
  outline:none;
}

.card{
  background:rgba(255,255,255,0.03);
  border-radius:16px;
  padding:20px;
  margin-bottom:20px;
  box-shadow:0 0 30px rgba(0,0,0,0.4);
}

input,button{
  width:100%;
  padding:14px;
  border-radius:10px;
  border:none;
  margin-top:10px;
  font-size:16px;
}

input{
  background:#020617;
  color:white;
  border:1px solid #1e293b;
}

button{
  background:var(--primary);
  color:white;
  cursor:pointer;
  transition:.3s;
}
button:hover{opacity:.9}

.qr-preview{
  text-align:center;
  margin-top:20px;
}

.qr-preview img{
  max-width:200px;
  margin-top:10px;
  border-radius:10px;
  background:white;
  padding:10px;
}

.history-item{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  background:#020617;
  padding:10px;
  border-radius:10px;
  margin-top:10px;
}

.history-item img{
  width:60px;
  background:white;
  padding:5px;
  border-radius:8px;
}

.small-btn{
  padding:8px 12px;
  font-size:14px;
}
</style>
</head>

<body>
<div class="container">

  <!-- Header -->
  <div class="header card">
    <img id="profilePic" src="https://via.placeholder.com/100">
    <div>
      <input id="username" placeholder="Your Name">
      <input type="file" id="profileUpload" accept="image/*">
    </div>
  </div>

  <!-- Generator -->
  <div class="card">
    <h2>QR Code Generator</h2>
    <input id="qrText" placeholder="à¦à¦–à¦¾à¦¨à§‡ à¦Ÿà§‡à¦•à§à¦¸à¦Ÿ à¦²à¦¿à¦–à§à¦¨">
    <button onclick="generateQR()">Generate QR</button>

    <div class="qr-preview" id="preview" style="display:none;">
      <img id="qrImage">
      <br>
      <button class="small-btn" onclick="downloadQR()">Download</button>
    </div>
  </div>

  <!-- History -->
  <div class="card">
    <h3>History</h3>
    <div id="history"></div>
  </div>

</div>

<script>
const qrImage = document.getElementById('qrImage');
const preview = document.getElementById('preview');
const historyDiv = document.getElementById('history');

function generateQR(){
  const text = document.getElementById('qrText').value.trim();
  if(!text) return alert("à¦Ÿà§‡à¦•à§à¦¸à¦Ÿ à¦²à¦¿à¦–à§‹ à¦†à¦—à§‡ ðŸ™‚");

  const url = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(text)}`;
  qrImage.src = url;
  preview.style.display="block";

  saveHistory(text,url);
}

function downloadQR(){
  const a = document.createElement('a');
  a.href = qrImage.src;
  a.download = "qr-code.png";
  a.click();
}

function saveHistory(text,url){
  let data = JSON.parse(localStorage.getItem('qrHistory')) || [];
  data.unshift({text,url});
  localStorage.setItem('qrHistory',JSON.stringify(data));
  loadHistory();
}

function loadHistory(){
  historyDiv.innerHTML="";
  let data = JSON.parse(localStorage.getItem('qrHistory')) || [];
  data.forEach(item=>{
    const div=document.createElement('div');
    div.className="history-item";
    div.innerHTML=`
      <img src="${item.url}">
      <small>${item.text}</small>
      <button class="small-btn" onclick="viewQR('${item.url}')">View</button>
    `;
    historyDiv.appendChild(div);
  });
}

function viewQR(url){
  qrImage.src=url;
  preview.style.display="block";
}

document.getElementById('profileUpload').addEventListener('change',e=>{
  const file=e.target.files[0];
  if(!file)return;
  const reader=new FileReader();
  reader.onload=()=> {
    document.getElementById('profilePic').src=reader.result;
    localStorage.setItem('profilePic',reader.result);
  };
  reader.readAsDataURL(file);
});

document.getElementById('username').addEventListener('input',e=>{
  localStorage.setItem('username',e.target.value);
});

window.onload=()=>{
  loadHistory();
  const pic=localStorage.getItem('profilePic');
  const name=localStorage.getItem('username');
  if(pic) profilePic.src=pic;
  if(name) username.value=name;
}
</script>
</body>
</html>